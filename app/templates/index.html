<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Catastro SaaS Pro v2 | GIS Dashboard</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="css/tasador.css">
    <style>
        /* Estilos espec√≠ficos para la vista envolvente */
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; font-family: 'Inter', sans-serif; }
        
        .dashboard-container {
            display: grid;
            grid-template-columns: 350px 1fr 350px;
            grid-template-rows: auto 1fr auto;
            height: 100vh;
            gap: 10px;
            padding: 10px;
            background-color: #0f172a; /* Fondo oscuro profesional */
        }

        #main-map {
            grid-column: 2;
            grid-row: 1 / 3;
            border-radius: 12px;
            z-index: 1;
        }

        .side-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 10;
            overflow-y: auto;
        }

        /* Tarjetas Estilo "Glassmorphism" */
        .widget-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .widget-card h3 { margin-top: 0; font-size: 0.9rem; color: var(--color-primary); display: flex; align-items: center; gap: 8px; border-bottom: 1px solid #eee; padding-bottom: 8px; }

        /* Report Card (Inferior) */
        .report-widget {
            grid-column: 1 / 4;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            align-items: center;
        }
    </style>
</head>
<body>

<div class="dashboard-container">
    
    <aside class="side-panel">
        <div class="widget-card">
            <h3>üèõÔ∏è Gesti√≥n de Catastro</h3>
            <div class="flex-col gap-sm">
                <input type="text" id="ref-input" placeholder="Referencia Catastral (20)">
                <div class="drop-zone" id="csv-drop">
                    <p class="text-xs">Arrastra CSV/TXT para procesado por lotes</p>
                </div>
                <div class="flex justify-between">
                    <button class="btn btn-sm btn-primary">Agrupar por Ref</button>
                    <button class="btn btn-sm btn-outline">Agrupar por Tipo</button>
                </div>
            </div>
        </div>

        <div class="widget-card">
            <h3>üìÇ An√°lisis Geogr√°fico (KML/GeoJSON)</h3>
            <input type="file" id="kml-input" multiple accept=".kml,.geojson,.json" class="mt-sm">
            <div id="file-list" class="mt-md font-mono text-xs">
                </div>
        </div>
    </aside>

    <div id="main-map"></div>

    <aside class="side-panel">
        <div class="widget-card" style="flex-grow: 1;">
            <h3>üìä Afecciones Detectadas</h3>
            <div id="afecciones-container" class="gap-sm flex-col">
                <p class="text-muted text-sm">Cargue una parcela para iniciar el an√°lisis vectorial...</p>
                </div>
        </div>

        <div class="widget-card">
            <h3>üñºÔ∏è Capturas Generadas</h3>
            <div id="image-previews" class="grid grid-cols-2 gap-sm">
                </div>
        </div>
    </aside>

    <footer class="widget-card report-widget">
        <div>
            <label class="text-xs font-bold">T√©cnico:</label>
            <input type="text" class="w-full" placeholder="Nombre y Apellidos">
        </div>
        <div>
            <label class="text-xs font-bold">Colegiado:</label>
            <input type="text" class="w-full" placeholder="N¬∫ Colegiaci√≥n">
        </div>
        <div class="flex items-center gap-md">
            <div class="logo-preview-box" id="logo-drop">
                <span class="text-xs">Logo</span>
            </div>
            <textarea placeholder="Notas adicionales..." rows="1" class="w-full"></textarea>
        </div>
        <button class="btn btn-success w-full" style="height: 100%;">
            <span>üìÑ</span> GENERAR INFORME PDF
        </button>
    </footer>

</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="js/tasador.js"></script>
</body>
</html>
